<div>
    <mat-toolbar color="primary">        
        <span>Radnik</span>

        <span class="example-spacer"></span>

        <span >          
            Dodaj ugostitelja 
            <button mat-icon-button (click)="toggleAddingCaterer()" *ngIf="addingCaterer==false">                  
                <mat-icon>add_circle_outline</mat-icon>          
            </button>
            <button mat-icon-button (click)="toggleAddingCaterer()" *ngIf="addingCaterer==true">                  
                <mat-icon>cancel</mat-icon>          
            </button>
        </span>

        <span class="example-spacer"></span>
        
        <span >
            Odjavi se 
            <button mat-icon-button (click)="logOut()">                  
                <mat-icon>exit_to_app</mat-icon>          
            </button>
        </span>
                
    </mat-toolbar>
</div>
<div style="text-align: center;">
    <span style="color:red; font-size:18px; text-align: center;" *ngIf="newCatererMessage!=''">{{newCatererMessage}}</span>
    <span style="color:rgb(0, 0, 0); font-size:18px; text-align: center;" *ngIf="newCatererInfo!=''">{{newCatererInfo}}</span>
</div>
<br>
<app-addworker (userAdded)="catererAdded($event)" *ngIf="addingCaterer==true"></app-addworker>
<br>
<div>
    <p style="font-size: 20px; text-align: center; font-weight: bold;">Pregled ugostitelja</p>
    <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8" >
        <!-- Naziv Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Naziv ugostitelja</th>
          <td mat-cell *matCellDef="let element">
            <span *ngIf="element._id != editModeUserId"> {{element.name}} </span>
            <span *ngIf="element._id == editModeUserId"> 
                <form class="example-form">
                    <mat-form-field class="example-full-width">
                      <mat-label>Naziv</mat-label>
                      <input matInput name="name" [(ngModel)]="editModeUser.name">
                    </mat-form-field>
                </form>
            </span> 
          </td>
        </ng-container>   
       
         <!-- Vrsta Column -->
         <ng-container matColumnDef="kind">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Vrsta ugostitelja </th>
            <td mat-cell *matCellDef="let element" >           
                <span *ngIf="element.kind == 1 && element._id != editModeUserId"> Pravno lice </span>
                <span *ngIf="element.kind == 2 && element._id != editModeUserId"> Preduzetnik </span>
                <span *ngIf="element.kind == 3 && element._id != editModeUserId"> Fizičko lice </span>
                <span *ngIf="element.kind == 4 && element._id != editModeUserId"> Ustanova </span>
                <span *ngIf="element._id == editModeUserId"> 
                    <form class="example-form">
                        <mat-form-field >
                            <mat-label>Vrsta korisnika</mat-label>
                            <mat-select [(value)]="editModeUser.kind">
                              <mat-option *ngFor="let vrsta of vrsteKorisnika" [value]="vrsta.value">
                                {{vrsta.viewValue}}
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                    </form>
                </span> 
            </td>
        </ng-container>
    
        <!-- Registrovan Column -->
        <ng-container matColumnDef="registeredFlag">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Registrovan kod nadležnog organa? </th>
            <td mat-cell *matCellDef="let element">           
                <span *ngIf="element.registeredFlag == true && element._id != editModeUserId"> Da </span>
                <span *ngIf="element.registeredFlag == false && element._id != editModeUserId"> Ne </span>
                <span *ngIf="element._id == editModeUserId"> 
                    <form class="example-form">
                        <mat-form-field>
                            <mat-label>Registrovan</mat-label>
                            <mat-select [(value)]="editModeUser.registeredFlag">
                              <mat-option *ngFor="let reg of tipoviRegistracije" [value]="reg.value">
                                {{reg.viewValue}}
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                    </form>
                </span>
            </td>
        </ng-container>
        <!-- Opis Column -->
        <ng-container matColumnDef="details">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Opis ugostitelja </th>
            <td mat-cell *matCellDef="let element">
              <span *ngIf="element._id != editModeUserId"> {{element.details}} </span>
              <span *ngIf="element._id == editModeUserId"> 
                  <form class="example-form">
                      <mat-form-field class="example-full-width">
                        <mat-label>Opis</mat-label>
                        <input matInput name="details" [(ngModel)]="editModeUser.details">
                      </mat-form-field>
                  </form>
              </span> 
            </td>
          </ng-container>
        <!-- Sačuvaj Column -->
        <ng-container matColumnDef="buttonsSave">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>  </th>
            <td mat-cell *matCellDef="let element"> 
                <span *ngIf="element._id != editModeUserId"> 
                    <form>                    
                        <button mat-icon-button class="example-icon delete-icon">                  
                            <mat-icon>edit</mat-icon>          
                        </button>
                    </form>
                </span>            
                <span *ngIf="element._id == editModeUserId"> 
                    <form>                    
                        <button mat-stroked-button color="primary" (click)="save()">Sačuvaj</button>
                    </form>
                </span>
            </td>
        </ng-container>
    
        <!-- Otkaži Column -->
        <ng-container matColumnDef="buttonsCancel">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>  </th>
            <td mat-cell *matCellDef="let element">             
                <span *ngIf="element._id == editModeUserId"> 
                    <form>
                        <button mat-stroked-button color="warn" (click)="cancel()">Otkaži</button>
                    </form>                
                </span>
            </td>
        </ng-container>
      
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr class="row" mat-row *matRowDef="let row; columns: displayedColumns;" (click)="edit(row)"></tr>
    </table>
</div>

  